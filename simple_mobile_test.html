<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>ü¶≠ Simple Mobile Test</title>
    <style>
        * {
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            min-height: 100vh;
            touch-action: manipulation;
        }
        
        .container {
            max-width: 100%;
            margin: 0 auto;
        }
        
        h1 {
            text-align: center;
            margin-bottom: 30px;
            font-size: 2em;
        }
        
        .test-section {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            backdrop-filter: blur(10px);
        }
        
        .test-section h3 {
            margin-top: 0;
            color: #ffd700;
            font-size: 1.3em;
        }
        
        .test-button {
            background: #4CAF50;
            color: white;
            border: none;
            padding: 20px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 18px;
            margin: 10px 0;
            width: 100%;
            transition: all 0.3s ease;
            touch-action: manipulation;
            min-height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .test-button:active {
            background: #3d8b40;
            transform: scale(0.95);
        }
        
        .test-button.touched {
            background: #ffc107;
            color: #000;
        }
        
        .log-area {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            padding: 15px;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            max-height: 300px;
            overflow-y: auto;
            white-space: pre-wrap;
        }
        
        .status {
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
            font-weight: bold;
            text-align: center;
            font-size: 16px;
        }
        
        .status.success {
            background: rgba(76, 175, 80, 0.3);
            border: 2px solid #4CAF50;
        }
        
        .status.error {
            background: rgba(244, 67, 54, 0.3);
            border: 2px solid #f44336;
        }
        
        .status.warning {
            background: rgba(255, 193, 7, 0.3);
            border: 2px solid #ffc107;
        }
        
        .info-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin: 15px 0;
        }
        
        .info-item {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
        }
        
        .info-item strong {
            display: block;
            color: #ffd700;
            margin-bottom: 5px;
            font-size: 14px;
        }
        
        .info-item span {
            font-size: 12px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ü¶≠ Simple Mobile Test</h1>
        
        <div class="test-section">
            <h3>üì± Device Information</h3>
            <div class="info-grid">
                <div class="info-item">
                    <strong>Touch Support</strong>
                    <span id="touchSupport">Loading...</span>
                </div>
                <div class="info-item">
                    <strong>Screen Size</strong>
                    <span id="screenSize">Loading...</span>
                </div>
                <div class="info-item">
                    <strong>User Agent</strong>
                    <span id="userAgent">Loading...</span>
                </div>
                <div class="info-item">
                    <strong>Touch Points</strong>
                    <span id="touchPoints">Loading...</span>
                </div>
            </div>
        </div>
        
        <div class="test-section">
            <h3>üéØ Touch Test Buttons</h3>
            <button class="test-button" id="testBtn1">
                Test Button 1 - Tap Me!
            </button>
            <button class="test-button" id="testBtn2">
                Test Button 2 - Tap Me!
            </button>
            <button class="test-button" id="testBtn3">
                Test Button 3 - Tap Me!
            </button>
            <div id="buttonStatus" class="status warning">
                No buttons tapped yet
            </div>
        </div>
        
        <div class="test-section">
            <h3>üß™ App Connection Test</h3>
            <button class="test-button" onclick="testAppConnection()">
                Test Line Walrus App Connection
            </button>
            <div id="connectionStatus" class="status warning">
                Connection not tested yet
            </div>
        </div>
        
        <div class="test-section">
            <h3>üìã Debug Logs</h3>
            <div class="log-area" id="logArea">Ready for testing...\n</div>
            <button class="test-button" onclick="clearLogs()" style="background: #f44336;">
                Clear Logs
            </button>
        </div>
    </div>

    <script>
        let logArea = document.getElementById('logArea');
        let buttonCount = 0;
        
        function log(message, type = 'info') {
            const timestamp = new Date().toLocaleTimeString();
            const emoji = {
                'info': '‚ÑπÔ∏è',
                'success': '‚úÖ',
                'error': '‚ùå',
                'warning': '‚ö†Ô∏è',
                'debug': 'üîç'
            };
            
            const logEntry = `[${timestamp}] ${emoji[type] || 'üìù'} ${message}\n`;
            logArea.textContent += logEntry;
            logArea.scrollTop = logArea.scrollHeight;
            
            console.log(`[${timestamp}] ${message}`);
        }
        
        function updateDeviceInfo() {
            // Touch Support
            const touchSupport = 'ontouchstart' in window || navigator.maxTouchPoints > 0;
            document.getElementById('touchSupport').textContent = touchSupport ? 'Yes' : 'No';
            
            // Screen Size
            document.getElementById('screenSize').textContent = 
                `${window.innerWidth}x${window.innerHeight}`;
            
            // User Agent
            const ua = navigator.userAgent;
            document.getElementById('userAgent').textContent = 
                ua.length > 25 ? ua.substring(0, 25) + '...' : ua;
            
            // Touch Points
            document.getElementById('touchPoints').textContent = 
                navigator.maxTouchPoints || 'Unknown';
        }
        
        function setupButtonTests() {
            const buttons = document.querySelectorAll('.test-button');
            
            buttons.forEach((button, index) => {
                // Add click event listener
                button.addEventListener('click', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    
                    buttonCount++;
                    const buttonName = `Button ${index + 1}`;
                    
                    log(`Button clicked: ${buttonName}`, 'success');
                    
                    // Visual feedback
                    this.classList.add('touched');
                    setTimeout(() => {
                        this.classList.remove('touched');
                    }, 200);
                    
                    // Update status
                    document.getElementById('buttonStatus').textContent = 
                        `Last tapped: ${buttonName} (Total: ${buttonCount})`;
                    document.getElementById('buttonStatus').className = 'status success';
                });
                
                // Add touch event listeners for debugging
                button.addEventListener('touchstart', function(e) {
                    log(`Touch start on ${button.id}`, 'debug');
                }, { passive: true });
                
                button.addEventListener('touchend', function(e) {
                    log(`Touch end on ${button.id}`, 'debug');
                }, { passive: true });
            });
        }
        
        async function testAppConnection() {
            log('Testing connection to Line Walrus app...', 'debug');
            
            const statusDiv = document.getElementById('connectionStatus');
            statusDiv.textContent = 'Testing connection...';
            statusDiv.className = 'status warning';
            
            try {
                // Try port 5001 first
                const response = await fetch('http://127.0.0.1:5001/');
                if (response.ok) {
                    log('‚úÖ App connection successful on port 5001!', 'success');
                    statusDiv.textContent = '‚úÖ Connected to Line Walrus (port 5001)';
                    statusDiv.className = 'status success';
                } else {
                    log(`‚ùå App connection failed on port 5001: ${response.status}`, 'error');
                    statusDiv.textContent = `‚ùå Connection failed: ${response.status}`;
                    statusDiv.className = 'status error';
                }
            } catch (error) {
                log(`‚ùå App connection error on port 5001: ${error.message}`, 'error');
                
                // Try port 5002
                try {
                    const response2 = await fetch('http://127.0.0.1:5002/');
                    if (response2.ok) {
                        log('‚úÖ App connection successful on port 5002!', 'success');
                        statusDiv.textContent = '‚úÖ Connected to Line Walrus (port 5002)';
                        statusDiv.className = 'status success';
                    } else {
                        log(`‚ùå App connection failed on port 5002: ${response2.status}`, 'error');
                        statusDiv.textContent = `‚ùå Connection failed on both ports`;
                        statusDiv.className = 'status error';
                    }
                } catch (error2) {
                    log(`‚ùå App connection error on port 5002: ${error2.message}`, 'error');
                    statusDiv.textContent = '‚ùå Cannot connect to Line Walrus app';
                    statusDiv.className = 'status error';
                }
            }
        }
        
        function clearLogs() {
            logArea.textContent = 'Logs cleared...\n';
            buttonCount = 0;
            log('Ready for new tests', 'info');
        }
        
        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            log('ü¶≠ Simple Mobile Test loaded', 'info');
            updateDeviceInfo();
            setupButtonTests();
            
            log('Ready for testing!', 'success');
            log('Instructions:', 'info');
            log('1. Tap the test buttons above', 'info');
            log('2. Test the app connection', 'info');
            log('3. Watch the logs for touch events', 'info');
        });
        
        // Handle orientation changes
        window.addEventListener('orientationchange', function() {
            setTimeout(updateDeviceInfo, 100);
            log('Orientation changed', 'info');
        });
        
        // Handle resize
        window.addEventListener('resize', function() {
            updateDeviceInfo();
            log('Window resized', 'info');
        });
    </script>
</body>
</html>
